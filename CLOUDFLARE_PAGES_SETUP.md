# Cloudflare Pages Setup Guide

This project is configured for deployment on Cloudflare Pages.

## Cloudflare Pages Dashboard Configuration

### Build Settings

- **Framework preset**: Next.js
- **Build command**: `npm run build`
- **Build output directory**: `.next`
- **Root directory**: (leave empty)
- **Node.js version**: 22.x

### Environment Variables

Set these in the Cloudflare Pages dashboard:

```
NODE_ENV=production
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

### Branch Configuration

- **Production branch**: `main`
- **Preview branches**: `develop`, `feature/*`

## Deployment Process

1. **Automatic Deployment**:
   - Push to configured branches triggers automatic builds
   - No `wrangler.toml` needed for Pages deployment

2. **Manual Deployment** (if needed):

   ```bash
   # Build locally
   npm run build

   # Deploy manually (requires wrangler CLI and authentication)
   npx wrangler pages deploy .next --project-name napoleon-game
   ```

## File Structure for Cloudflare Pages

- `_headers`: Custom headers configuration (included)
- `_redirects`: URL redirects and rewrites (included)
- `.next/`: Build output directory (generated by `npm run build`)

## Notes

- This project uses Next.js SSR mode compatible with Cloudflare Pages
- Dynamic routes (`/game/[gameId]`) are supported via Cloudflare Functions
- Static assets are automatically cached
- No Workers configuration needed
